name = "aiquiz-oauth"
main = "src/index.ts"
compatibility_date = "2024-11-20"
compatibility_flags = ["nodejs_compat"]

# Static Assets Configuration
[assets]
directory = "./public"
binding = "ASSETS"

# OAuth 2.1 Configuration
[vars]
OAUTH_BASE_URL = "https://panel.aiquiz.pl"

# Custom Domains (automatic DNS + certificate management)
[[routes]]
pattern = "api.aiquiz.pl"
custom_domain = true

[[routes]]
pattern = "panel.aiquiz.pl"
custom_domain = true

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "aiquiz-oauth"
database_id = "ae049cfc-a15e-4c81-b235-f4ab86c955df"

# KV Namespaces
[[kv_namespaces]]
binding = "OAUTH_STORE"
id = "ed207a9e99b2420cb3c65622c1b4d6f9"

[[kv_namespaces]]
binding = "USER_SESSIONS"
id = "e5ad189139cd44f38ba0224c3d596c73"
